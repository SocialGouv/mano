// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`kosko generate --preprod 1`] = `
"---
apiVersion: v1
kind: Namespace
metadata:
  annotations:
    socialgouv/creator: autodevops
    field.cattle.io/creatorId: gitlab
    field.cattle.io/projectId: ''
    git/branch: v1.2.3
    git/remote: >-
      https://gitlab-ci-token:[MASKED]@gitlab.factory.social.gouv.fr/SocialGouv/mano.git
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  labels:
    azure-pg-admin-user: mano
    application: v1-2-3-mano
    component: v1-2-3-mano
    owner: mano
    team: mano
    cert: wildcard
  name: mano-186-preprod-dev2
---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  labels:
    app: api
    application: v1-2-3-mano
    component: v1-2-3-mano
    owner: mano
    team: mano
    cert: wildcard
  name: api
  namespace: mano-186-preprod-dev2
spec:
  replicas: 1
  selector:
    matchLabels:
      app: api
  template:
    metadata:
      annotations:
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
        app.gitlab.com/app: socialgouv-mano
        app.gitlab.com/env: preprod-dev42
        app.gitlab.com/env.name: preprod-dev42
      labels:
        app: api
        application: v1-2-3-mano
        component: v1-2-3-mano
        owner: mano
        team: mano
        cert: wildcard
    spec:
      containers:
        - image: ghcr.io/socialgouv/mano/api:sha-undefined
          livenessProbe:
            failureThreshold: 6
            httpGet:
              path: /healthz
              port: http
            initialDelaySeconds: 30
            periodSeconds: 5
            timeoutSeconds: 5
          name: api
          ports:
            - containerPort: 3000
              name: http
          readinessProbe:
            failureThreshold: 15
            httpGet:
              path: /healthz
              port: http
            initialDelaySeconds: 0
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 100m
              memory: 128Mi
          startupProbe:
            failureThreshold: 12
            httpGet:
              path: /healthz
              port: http
            periodSeconds: 5
          envFrom:
            - secretRef:
                name: azure-pg-user
            - secretRef:
                name: api
      imagePullSecrets:
        - name: regcred
      initContainers:
        - env:
            - name: WAIT_FOR_RETRIES
              value: '24'
          envFrom:
            - secretRef:
                name: azure-pg-user
          image: ghcr.io/socialgouv/docker/wait-for-postgres:6.43.1
          imagePullPolicy: Always
          name: wait-for-postgres
          resources:
            limits:
              cpu: 20m
              memory: 32Mi
            requests:
              cpu: 5m
              memory: 16Mi
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  name: api
  namespace: mano-186-preprod-dev2
  labels:
    application: v1-2-3-mano
    component: v1-2-3-mano
    owner: mano
    team: mano
    cert: wildcard
spec:
  encryptedData:
    X_TIPIMAIL_APIUSER: >-
      AgBVs+HJnZoyliAsiJo6vF43mbTC6/4nI+/25WIZLH3Z9N2GaqzgCK9frniVfYrfINdqKoXaiqgdw+PocyPhPVMOw9AHWveTkfZ34lOXsa37EIqePrj90kEnhPP9LxO/pI98Bj9/df7wi7hLJY0wFm/ys6VG6In1LTBWsaGdIHyUVBRuuQmHCgUG3s9hKLqAKNfGfcFMOGFwNQMcZZ8wK2ZJhunlkjohJExyzR1v7KYLkbFTUrnvCHVLEwJ/MQQruYCcYfL8DxbuPL+hie/A8a9ELB8BmdFVdxjBXmAZ4iHRY5b9jqRBrMzUVc0oHE03k1qjDNrlRTxV4AcAL5AduKWjwpz4iCEY5tqOKMapq/8sHRnKUYzZnFJdD76AFObL1MSzoTvy2JOjKQ5/4o4TK3LxQ5V7qFLZTKv5ipTicwhIwdgUYtda+l+Z8gdoCQl5COgpppgfw/EOF4Pd/WGvlK2B7GI5EpzpozDL+5ASlvROO48iRgHTSfPfxAVxw+7QNJhP4GSts1ODPC+XLa3LJ37Knca/sC3/cIZKi0uXSwQlBNPIZ4vMfS4dRRjchfcDUoVxv7pkhBsZ6OM8qqBVG2yjChf2uW7DzvOnzDr/kB3q/xznHCL5XOISfE7M7ua4QgWFFwu+QM0seMJAZH/wzhmBhjnzZYSktnc5KZ3TgIiHuNiTo81CP00Rf1afcP5EuMtSHnAiBpalX/ANP5Jw7KHtdJ8uhiRwfjrSLJxi/eJCwQ==
    X_TIPIMAIL_APIKEY: >-
      AgAODYMp5mGFfXDRKEVr48Mp5J1tDSh/iBYK/INwGcPyesG4zpnSIi74PCbj7LB4+A9LotaFfin5Rl4RPcmww8aEPa/plKs+1qc0EWJ3uMtifMf4rPbLhsbzbdIxiC+/cA+WA378tuM8eb7B5y1Xram3Kf4P/S20P0Dc3bSb/vO2Zv/xVZwFwmo96j+a8DNbSUtN17F7tbbJwQbHS7z16kTH3ZwVusG+N2rG93E4TrjyARtDS8qIz9pX2wr+zp9PIsDSAXZbauV6PaSbKkGUAyt6YLaCvnKXZffZxcPMhzy9XBwWw5oKeCadwVa9W7OVbah7QAKyzR2KFptcU/QAVIYiDZuFCNQL7llD0MJTPgpPFbUyyXc4x76eFuCErq9t+acTQ86jJyMNjkR8EROtxPGwpTbqEeLB0VH7e5RixvJgoamyQQCcSQHKtv7zI72yYUtba57+eQiWGWb+MJ1h9/ZXm0zw3XUEgqbzcBWBnrr308I6KXiUgLDRFsN4TtS8ecfmJewwxK/JBrQvx8LDRS6+UPqQlrqo2hwG40LVd1U0hGnCbA/6r+3Jj5g9wCWPUEBkslmjOjgOxcwVDwct9uu/PrRsAazoBDRcvbO4AEsQW+rcoxTRZYncW00dKvCmoTD+fqKstWWrA2wSi3RG1w20jIU/cPf32rE3LGWQwrIYNEfgEkANp/vbtk7BlMKR5oUfahDo9VAMhEDOismUBsj5q/8MApPWUhncre3VzweAMg==
    SECRET: >-
      AgBXhk1jaMUTyQVnpPF7ljm8FtEq4yKjG47LmCl48gQ8Kq/V6RLoH1XFTirSGfzyo/WD18wd8+CyxlYGVIEjRSOEHzdF0cFxOZDoqbj8fmYTgcoIJ+eUflbJjdMk12rDtHDUHKk2tLWGPB3/sB9oG5Ztp+eMCUB5OOCx8k9CcA3b6JkdIMdQ5Z/bHDG5BDc0SfTAsIuEYwiAJtqnV4XQmCh4PKU9Ka1PEIMDs0vsFboCeys0MdJf+RLs55NkaQfXTsIOUFnjC6ARMMLuF8ZhvHXlHaS7qZ4MdvIHXr8fMIXRCOTUCdWFwo3kgJQZkSe0l70QbXizO66u3woQzlV9CMn15EQtCgHWxh62c4+gyM78QHG4rrTUrMNui4yKL4BJyTVuTKNw2Tdm4MPYuO0GAbORSaDoVtz79z0Uj3SkwUbE+9Eb8cf++jMcT9WNZ4y7MXoX5SRgz2Qpio3aMEkUSoD1ahURA23RSnu4c445BFw0SKN7Ozawy3mSJnB9suzT44jUjHhgLveXv5Ar8GQeBsXo79xK6w656TO2n01qQws2eGHKeFzOfQkm4gFHUjnGC2aB5e1SvcS08x7VchCn0LRUcMGM+hQG18y8kUmNc9ilcPT7H5USJy2UEfZbGgyGoJbIKhsiytVt56Mf3X/q2PlMUJ9dVLP5Nh0i60OZQ1X05pUNOhqAhQ3CnQe9J5i8TsQCCaY65W5xzSk51M6gC6GOer8Net9dC0tL/SVAS6J5Z26r6Q==
  template:
    metadata:
      annotations:
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
        app.gitlab.com/app: socialgouv-mano
        app.gitlab.com/env: preprod-dev42
        app.gitlab.com/env.name: preprod-dev42
      name: api
      labels:
        application: v1-2-3-mano
        component: v1-2-3-mano
        owner: mano
        team: mano
        cert: wildcard
    type: Opaque
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: api
    application: v1-2-3-mano
    component: v1-2-3-mano
    owner: mano
    team: mano
    cert: wildcard
  name: api
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  namespace: mano-186-preprod-dev2
spec:
  ports:
    - name: http
      port: 80
      targetPort: 3000
  selector:
    app: api
  type: ClusterIP
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  labels:
    app: api
    application: v1-2-3-mano
    component: v1-2-3-mano
    owner: mano
    team: mano
    cert: wildcard
  name: api
  namespace: mano-186-preprod-dev2
spec:
  rules:
    - host: preprod-mano.dev42.fabrique.social.gouv.fr
      http:
        paths:
          - backend:
              service:
                name: api
                port:
                  name: http
            path: /
            pathType: Prefix
  tls:
    - hosts:
        - preprod-mano.dev42.fabrique.social.gouv.fr
      secretName: wildcard-crt
---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  labels:
    app: dashboard
    application: v1-2-3-mano
    component: v1-2-3-mano
    owner: mano
    team: mano
    cert: wildcard
  name: dashboard
  namespace: mano-186-preprod-dev2
spec:
  replicas: 1
  selector:
    matchLabels:
      app: dashboard
  template:
    metadata:
      annotations:
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
        app.gitlab.com/app: socialgouv-mano
        app.gitlab.com/env: preprod-dev42
        app.gitlab.com/env.name: preprod-dev42
      labels:
        app: dashboard
        application: v1-2-3-mano
        component: v1-2-3-mano
        owner: mano
        team: mano
        cert: wildcard
    spec:
      containers:
        - image: ghcr.io/socialgouv/mano/dashboard:sha-undefined
          livenessProbe:
            failureThreshold: 6
            httpGet:
              path: /healthz
              port: http
            initialDelaySeconds: 30
            periodSeconds: 5
            timeoutSeconds: 5
          name: dashboard
          ports:
            - containerPort: 80
              name: http
          readinessProbe:
            failureThreshold: 15
            httpGet:
              path: /healthz
              port: http
            initialDelaySeconds: 0
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 10m
              memory: 64Mi
          startupProbe:
            failureThreshold: 12
            httpGet:
              path: /healthz
              port: http
            periodSeconds: 5
      imagePullSecrets:
        - name: regcred
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: dashboard
    application: v1-2-3-mano
    component: v1-2-3-mano
    owner: mano
    team: mano
    cert: wildcard
  name: dashboard
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  namespace: mano-186-preprod-dev2
spec:
  ports:
    - name: http
      port: 80
      targetPort: 80
  selector:
    app: dashboard
  type: ClusterIP
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  labels:
    app: dashboard
    application: v1-2-3-mano
    component: v1-2-3-mano
    owner: mano
    team: mano
    cert: wildcard
  name: dashboard
  namespace: mano-186-preprod-dev2
spec:
  rules:
    - host: dashboard-preprod-mano.dev42.fabrique.social.gouv.fr
      http:
        paths:
          - backend:
              service:
                name: dashboard
                port:
                  name: http
            path: /
            pathType: Prefix
  tls:
    - hosts:
        - dashboard-preprod-mano.dev42.fabrique.social.gouv.fr
      secretName: wildcard-crt
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  annotations:
    sealedsecrets.bitnami.com/cluster-wide: 'true'
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  name: azure-pg-user
  namespace: mano-186-preprod-dev2
  labels:
    application: v1-2-3-mano
    component: v1-2-3-mano
    owner: mano
    team: mano
    cert: wildcard
spec:
  encryptedData:
    PGDATABASE: >-
      AgAmuGxlRoFKIqa63kwGfAaI9PnqZ21Ryc7TXcPBDAhb9edT0y/fuIcnHQTspnppBMMF3Ct0bbzW/XnqCGg3pCRFLn8Y+2r79mosFJ3xbtvRhS++QgQJ8KgwO4LnHkJ0wTWswsXPns2Jf1AQdcfagR3k+MuI5x5c6vz2lhwVgJVy1VePD42yrER+QsZZ0GlHFeDfXTRe1wqOMab5EqjMWKO6WBYWEBf9eB2Qb8frFRP/2+1tp1MqS4IVHeAMkcOA6gvd1ZWRjSe6ta3o+lxpNgpf3EC6Rg85PJRhRewNTheqCDXAvVxmiYQLfNsR3lUHWD4JWZWYtEyEWV6LCUf/yPYN+Hte+fApMdlo3/DtwXv+ibz7L+BZkPudKo7AsSK4/eMB0HwNOU8ZUIEaq77bbV9KkFm9MKQOqiGeVvK5+zDI2ABelGE7njyCOAbst9+LF+cU2ve7JT1JCdadRW66pNxNjZbyCb7M54ijxpHvL7ua3IPmtpf1qwvSc/Fjcv3bqMZzYDXGHQr2rTwYAcW7dhfAj2scJBfhAaXN+dqksKyNzv6ke+0gsEtDOL/VVwKgRJ9FORHI5A1FVaulIOCEabf5k9vrxxXuyq/7wsr4MEgJ4dysR6psBXRFXmEHEtAxQaeHMKB/HifB8qvnIuDxVCpBF6DVgq1HDLMjEiks4JowQKDcvclklHRAZzOMsexeCRP4j+EO
    PGHOST: >-
      AgDJTHONsLWvzUCqQ4Kb+8aHKTh9+ts2W/Lt6+djf99lhhoqJ3ZLgCfei3seTgherXA0vocA14odv9GAee2zQyh2jfdzhEkFwxOUv/IcVNnaTMLN2vLrth37+7KkHXAfPWR20z+ZF7RDT/V9+GSVc6mx8xMBi1T2ufKdDAwPhDeZDiCcvYUNvbwiYVF6lyP9J1T8ynNxetTnXUh38rLYk6y9MLaVJzpWAc205oN0c1krqbXds5Pesqj2rJx8l6ZFUJti9wBHoxVP1pc6sj9MYWl4PvqA1G/I4WEJv6hll0qWcI955NFqU+cgYpgXtfOaSmPksJiW+v0DqbLJfs9YVb6+gm2A3Jwb0CO/bd0Ua8ivXIjpJ8XDiniUaksjaVkGrU0V5RxF0tJwR8DAg3VLTato4VT7QbiZNU79PG7gqHa7dMo0WCfgBnZIF7hnUcQuEtwz8OyJmddL/2A/IcEHGxJVyR1tn7btNn1IpOC5LjJ2R1eguXvRWf/9yG+OTfGs9M3/C4NO7eCz7Jp1Qi+P8P+/Ztjwl+azWTGk5f/0p371cOElAWWcmyq+RHN+w75TANehrxZpb8Ob2yMb6xJ4exj22fDzy1kJ2wJJMNXkW6CxLTpMf1QmqKu1g0wexh7DadDy4o1iLmPvRvkIv1v65rVt4aEeahJ1k2t5dfZ8X2fwYvZwhJacUx5edvAJAeXfR5xcX7Q8HWngb2FqJJQhPVnByH1tCKBDOIjEez3zaO2caBJD1t4kRUoxsuw=
    PGPASSWORD: >-
      AgAUf9IT9qI1YCAlE8rDmUxbHG7ji9HsdHnzIiTbQInOGD83in0qsvN2OdPpjBZ2iILWrp/fKVL8F35CmJ5CzikiXLa0B+5iyC41LTWuPf5NLpAdnFca4hOXa1WuUYmJZuZ+Ga7FydVLSoNUNrld5vupMVrQXH3SAL0jgr7adegrESeFVBbtSp/L+11D7VA3hPzxufZg8gzFW+OvJVFvCC7Qm3dRh3yHUZvZ/0v+2NFqPTlVEnR2faUVZPLR67LyGm0cZxUx7VwlkiH56LhFQCFVO5yw5G3vNtfroYpRPY7eM8uk/H9KGntlYuzUlA1milSIAKZzEIYsJFu0o15AGY8gzEidAbuTR46gQEchgJFCseZszRE2omU3RR7GoYTklS8kOUIAVIYolnjw0IaY5X+Iz21tjOfU3bjskbITAsE0YMHLkUBpALwL8adJ4esuTsy0DzInzffyUhqGTcPxQoqOzbNR2AO2SVokxtBerlmPS3kfCLOuffXrktmN74FHtNr4vgDl7pY4T8NNR91fTJJd92V/6Yvgvj4VIIiFy2nzGmojcRz7kwbmVTn3KQwd/5OW8nm1u3sGqgPzhROiAkb+uJjt5itoJp6HqfvuddDbew/oo+jWk6ZN1v+FSQjp8zwwqf69UzWxlNv2EgiqlzgVUJAKgd+QFNqcSiZ1UJa/aV1oIqySWaHGy7TLrsY7cG1RKzZDF+xhSrUDJxBY0/RN/N9uTTisdugimMEI8mm5L1zSdsp5u20=
    PGSSLMODE: >-
      AgBCQtodNlnpNQXEuIVzYFfQzGd6GVBtZTRyzTi/4MktkVZfWkumpZi66qnQi84wRAL/svOVXTV5xjzAaDenbJaYyK9dzBR959i5kkxxs0wEsuhem5xOw7Hhc2sXBY4KldGBhwJlBNuR0k8106Dc/030hP+wz6EI1Dx8dbi9SGAyIYUyVEEzA7us04l2q6oYtFniQzLZAieI9OEL7L4+OlmZFKhBBPej8M2+y6bpWA3TXLpd7uK44+P4RtLWwMmD/3WdUq1d71duLFMLpsBC2XENxVIoMrhit0hQBEw+W41KofJGRomBxWOAt4lB9TibQxSwzfzGURHbLhAhVIFgZqGj7yk9Ut7TurYSyy9w0Pi4zM5ob2XLi/ejWrzQeLqnuMA6BLVqJfoEFRdrBotHBRiar4tmcJFfXqFP1zwMS9D1fQzRaXP3eWPJZxSbL6R7UwWOFCHE/CsdoJuLeIBh5T3dn/O+21ekeiI+2O0Cmj0f2OPI/6RzQ2cawKSa0soC7EMhzxBWtv6bDnVrh8lfn3yp58ILi4moYugkS0kgjA6V4celHhR/+GTmf5Dt+4sZHKPOc1wqJnCi7TsFKqN5/yzFa8nxjf9vgMIDmlnSf98prRlBLXNa+1mM0WfJiOm+XQsdPoCFdCVvdG2+K2YgRpSxe8Ku0Vk9w03RgndMNFl0loIzq4Gqsi6vytrfVNKFRrF/emnrr7nl
    PGUSER: >-
      AgCi0iSJ30puRWllfl3ORhGDOo9H+EFGymKa7MTr6AnG+KChUv21+Fron65Mb+4vL7Jshca8oRoUDpSG2MWpRt+TZl6WRDLHKtqXmK65tERcZyxIMMBBeridoxIeJf30LHdfnHB16SXgS9eNVT6JvcZlQLjBB7wvrLeqMmpHA6dss6rx3cP+tC7rCLXD3Yhl1IadesrRfXCHVkHKEhyNpUTXVn3E1IfoQTiZVFKCcyG9oxf81zJCPpafy6SZtXsSOGL3QO8so5MOW0xXK7XwGv3ZHQTC22t7Lx4ds1hKrtDoVI3fbHLOxLdYtBA4CeqrfD6X0ygWH0VF+ogDqimBXxeVWOAxt3zw5yzkx3/aHB5Oo9XMwCmgcaqBWb9oLlX2VDFrHE92kWe8r6GuFcABQOw89DbQWbAN53qs+s/bH2QjEpEU2K8eB4wvEf6xfd04UenGNX7dZlFUyEHYnYJKrAnxrF7i/q3odl/8w9732fXvoG8Pd83gBut3nZheLXCwzlSxZcc4nGYmro0HXIysziW5kLQQe392JFFpk51B55rm7iKaxfcQl2eeYbQuU9DA6IML6ZpF7GU5g8lKjIeripExIcEI++EArMlxyuscuAn/qEvtDyJxvaKq9kBuxUrKU6e/azZQdz+fRRySDqrQD87MtoVJbO/vEiE99dmk8odLItW6Z2l/ZxRPW0TS33exJVCWFro5crhUflPoZbol1Uu+TZzq7yu6ko/WUCQQQRZ65Iqf9LHtnkwEAo9EqT58qw==
  template:
    metadata:
      annotations:
        sealedsecrets.bitnami.com/cluster-wide: 'true'
        app.gitlab.com/app: socialgouv-mano
        app.gitlab.com/env: preprod-dev42
        app.gitlab.com/env.name: preprod-dev42
      name: azure-pg-user
      labels:
        application: v1-2-3-mano
        component: v1-2-3-mano
        owner: mano
        team: mano
        cert: wildcard
    type: Opaque
---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  labels:
    app: www
    application: v1-2-3-mano
    component: nginx
    owner: mano
    team: mano
    cert: wildcard
  name: www
  namespace: mano-186-preprod-dev2
spec:
  replicas: 1
  selector:
    matchLabels:
      app: www
  template:
    metadata:
      annotations:
        kapp.k14s.io/disable-default-ownership-label-rules: ''
        kapp.k14s.io/disable-default-label-scoping-rules: ''
        app.gitlab.com/app: socialgouv-mano
        app.gitlab.com/env: preprod-dev42
        app.gitlab.com/env.name: preprod-dev42
      labels:
        app: www
        application: v1-2-3-mano
        component: nginx
        owner: mano
        team: mano
        cert: wildcard
    spec:
      containers:
        - image: ghcr.io/socialgouv/mano/website:sha-undefined
          livenessProbe:
            failureThreshold: 6
            httpGet:
              path: /index.html
              port: http
            initialDelaySeconds: 30
            periodSeconds: 5
            timeoutSeconds: 5
          name: www
          ports:
            - containerPort: 80
              name: http
          readinessProbe:
            failureThreshold: 15
            httpGet:
              path: /index.html
              port: http
            initialDelaySeconds: 0
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 500m
              memory: 128Mi
            requests:
              cpu: 5m
              memory: 32Mi
          startupProbe:
            failureThreshold: 12
            httpGet:
              path: /index.html
              port: http
            periodSeconds: 5
      imagePullSecrets:
        - name: regcred
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: www
    application: v1-2-3-mano
    component: nginx
    owner: mano
    team: mano
    cert: wildcard
  name: www
  annotations:
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  namespace: mano-186-preprod-dev2
spec:
  ports:
    - name: http
      port: 80
      targetPort: 80
  selector:
    app: www
  type: ClusterIP
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    kapp.k14s.io/disable-default-ownership-label-rules: ''
    kapp.k14s.io/disable-default-label-scoping-rules: ''
    app.gitlab.com/app: socialgouv-mano
    app.gitlab.com/env: preprod-dev42
    app.gitlab.com/env.name: preprod-dev42
  labels:
    app: www
    application: v1-2-3-mano
    component: nginx
    owner: mano
    team: mano
    cert: wildcard
  name: www
  namespace: mano-186-preprod-dev2
spec:
  rules:
    - host: app-preprod-mano.dev42.fabrique.social.gouv.fr
      http:
        paths:
          - backend:
              service:
                name: www
                port:
                  name: http
            path: /
            pathType: Prefix
  tls:
    - hosts:
        - app-preprod-mano.dev42.fabrique.social.gouv.fr
      secretName: wildcard-crt
"
`;
